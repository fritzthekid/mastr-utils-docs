<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Dokumentation – mastr-utils</title>
    <link rel="stylesheet" href="static/css/styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { display: flex; min-height: 100vh; }
        nav { width: 250px; background: #a0a0a0; padding: 2rem 1rem; font-size: 1.1rem; min-height: 100vh; }
        nav ul { list-style: none; padding: 0; }
        nav ul li { margin-bottom: 1.5rem; }
        nav ul li a { color: #35424a; text-decoration: none; font-weight: bold; }
        nav ul li a:hover { text-decoration: underline; color: #1cda4f; }
        main { flex: 1; padding: 2rem; background: #f4f4f4; }
        .inner-body { background: white; border-radius: 8px; box-shadow: 0 2px 16px #ccc; padding: 2rem; margin: 0 auto; width: 80%; }
        .doc-warning { background: #fff3cd; border-left: 4px solid #ffc107; padding: 0.5rem 1rem; margin: 1rem 0; }
        .doc-note { background: #e7f5e6; border-left: 4px solid #1cda4f; padding: 0.5rem 1rem; margin: 1rem 0; }
        h1, h2, h3 { color: #35424a; }
        img.example { max-width: 100%; display: block; margin: 1.5rem auto; border: 1px solid #eee; border-radius: 4px; box-shadow: 0 1px 8px #ddd; }
        .example-caption { text-align: center; font-size: 0.95rem; color: #666; margin-bottom: 2rem; }
        @media (max-width: 900px) {
            nav { width: 100px; font-size: 0.9rem; }
            .inner-body { width: 98%; padding: 1rem; }
        }
    </style>
</head>
<body>
    <nav>
        <ul>
            <li><a href="#webapp">Webanwendung</a></li>
            <li><a href="#gpx-examples">GPX Beispiele</a></li>
            <li><a href="#plot-examples">Plot Beispiele</a></li>
            <li><a href="#cli-tools">CLI-Tools</a></li>
        </ul>
    </nav>
    <main>
        <div class="inner-body">
            <header>
                <h1 id="webapp">mastr-utils Webanwendung</h1>
            </header>
            <div class="doc-warning">
                <strong>Hinweis:</strong> Diese Tools und die Webanwendung werden angeboten wie in der LICENCE angegeben. Es gibt keine Gewähr, keinen Support oder ähnliches.
            </div>
            <p>
                Die <strong>Webanwendung</strong> ist die bequemste Möglichkeit, die Funktionen von mastr-utils zu nutzen. 
                Sie ist erreichbar unter: <a href="https://eduard.uber.space/mastrutils" target="_blank">https://eduard.uber.space/mastrutils</a>
            </p>
            <h2>Funktionen der Webanwendung</h2>
            <ul>
                <li><strong>Daten-Upload:</strong> Lade MaStR-Exportdateien (CSV) direkt hoch.</li>
                <li><strong>Filter &amp; Cluster:</strong> Filtere und gruppiere Einheiten nach Bundesland, Anlagentyp, Leistung u.v.m.</li>
                <li><strong>Kartenansicht:</strong> Visualisiere Anlagen und Parks direkt auf der Karte (Leaflet-basiert).</li>
                <li><strong>Plot-Erstellung:</strong> Erzeuge anschauliche SVG-Plots aus den Daten.</li>
                <li><strong>Export:</strong> Lade bearbeitete Daten als GPX oder SVG herunter.</li>
            </ul>
            <h2>So funktioniert die Seite</h2>
            <ol>
                <li>
                    <strong>Datei hochladen:</strong> Exportiere eine CSV aus dem Marktstammdatenregister und lade sie in der Webanwendung hoch.
                </li>
                <li>
                    <strong>Filter setzen:</strong> Wähle die gewünschten Kriterien – z.B. Bundesland, Anlagentyp, Mindestleistung.
                </li>
                <li>
                    <strong>Cluster wählen:</strong> Optional kannst du Anlagen nach räumlicher Nähe gruppieren.
                </li>
                <li>
                    <strong>Visualisierung:</strong> Die Ergebnisse werden auf der Karte angezeigt. Du kannst Details zu Anlagen abrufen.
                </li>
                <li>
                    <strong>Export:</strong> Die gefilterten/geclusterten Daten kannst du als GPX oder SVG herunterladen.
                </li>
            </ol>
            <h2>Screenshots &amp; Beispiele</h2>
            <img src="static/img/mastr_query.png" class="example" alt="CSV Export Marktstammdatenregister">
            <div class="example-caption">Beispiel: Export einer CSV-Datei aus dem Marktstammdatenregister</div>
            <img src="static/img/stromerzeuger_brd_pv_ge100.png" class="example" alt="Webapp: Karte mit PV-Anlagen">
            <div class="example-caption">Webapp: Kartenansicht mit geclusterten PV-Anlagen</div>
            <img src="static/img/stromerzeuger_landkreisludwigsburg_100kw.png" class="example" alt="Webapp: Anlagenfilter im Landkreis">
            <div class="example-caption">Webapp: Gefilterte Anlagen im Landkreis Ludwigsburg</div>
            <div class="doc-note">
                <strong>Direkt loslegen:</strong> <a href="https://eduard.uber.space/mastrutils" target="_blank">Zur Webanwendung</a>
            </div>

            <h2 id="gpx-examples">GPX Beispiele</h2>
            <p>Mit <strong>mastrtogpx</strong> lassen sich Anlagen-Daten in GPX-Dateien umwandeln und als Karte darstellen.</p>
            <h3>Stromerzeuger BRD PV ≥ 100kW (geclustert)</h3>
            <img src="static/img/stromerzeuger_brd_pv_ge100.png" class="example" alt="PV ≥ 100kW geclustert">
            <div class="example-caption">Solaranlagen ≥ 100kW deutschlandweit, Clusterung nach Fläche</div>
            <h3>Stromerzeuger Baden-Württemberg Wind ≥ 10MW (geclustert)</h3>
            <img src="static/img/stromerzeuger_wind_cluster_bawue_ge10mw.png" class="example" alt="Wind ≥ 10MW geclustert">
            <div class="example-caption">Windkraftanlagen ≥ 10MW in Baden-Württemberg, Clusterung nach Fläche</div>
            <h3>Stromerzeuger ≥ 500kW im Landkreis Ludwigsburg</h3>
            <img src="static/img/stromerzeuger_landkreisludwigsburg_100kw.png" class="example" alt="Ludwigsburg ≥ 100kW">
            <div class="example-caption">Alle Stromerzeuger ≥ 100kW im Landkreis Ludwigsburg</div>
            <h3>Stromerzeuger ≥ 500kW im Landkreis Ludwigsburg (mit Erläuterungen)</h3>
            <img src="static/img/stromerzeuger_landkreisludwigsburg_500kw.gpx" class="example" alt="Ludwigsburg ≥ 500kW GPX">
            <div class="example-caption">GPX-Export mit Erläuterungen zu einer Einheit</div>

            <h2 id="plot-examples">Plot Beispiele</h2>
            <p>Mit <strong>mastrtoplot</strong> können die Daten anschaulich als Vektorgraphik (SVG) dargestellt werden.</p>
            <h3>PV ≥ 500kW: Aktive Bruttoleistung pro Fläche</h3>
            <img src="static/img/stromerzeuger_pv_500k_brd_bundesland_pa.svg" class="example" alt="PV 500kW Bundesland">
            <div class="example-caption">Installierte Leistung von PV-Anlagen nach Fläche und Bundesland</div>
            <h3>PV ≥ 500kW: Sektorensplit</h3>
            <img src="static/img/stromerzeuger_pv_500k_brd_sectorensplit.svg" class="example" alt="PV Sektorensplit">
            <div class="example-caption">Verteilung der PV-Anlagen nach Sektoren</div>
            <h3>PV > 500kW: Installierte Leistung nach Inbetriebnahmejahr</h3>
            <img src="static/img/stromerzeuger_pv_500k_brd.svg" class="example" alt="PV Inbetriebnahmejahr">
            <div class="example-caption">PV-Anlagen nach Jahr der Inbetriebnahme</div>
            <h3>Wind > 1.5MW: Installierte Leistung nach Inbetriebnahmejahr</h3>
            <img src="static/img/stromerzeuger_wind_brd_1-5m_inbetriebnahmejahr.svg" class="example" alt="Wind Inbetriebnahmejahr">
            <div class="example-caption">Windkraftanlagen nach Jahr der Inbetriebnahme</div>
            <h3>Wind > 1.5MW: Leistung pro Fläche</h3>
            <img src="static/img/stromerzeuger_wind_brd_1-5m_pa.svg" class="example" alt="Wind Fläche">
            <div class="example-caption">Installierte Wind-Leistung nach Fläche</div>
            <h3>Biogas > 200kW: Installierte Leistung nach Inbetriebnahmejahr</h3>
            <img src="static/img/brd_biogas_200kW.svg" class="example" alt="Biogas Inbetriebnahmejahr">
            <div class="example-caption">Biogasanlagen nach Jahr der Inbetriebnahme</div>
            <h3>Ludwigsburg > 7kW: Energieträger-Split</h3>
            <img src="static/img/stromerzeuger_landkreis_ludwigsburg_energietraeger_split_7.svg" class="example" alt="Energieträger Ludwigsburg">
            <div class="example-caption">Energieträgersplit aller Anlagen im Landkreis Ludwigsburg > 7kW</div>

            <h2 id="cli-tools">CLI-Tools</h2>
            <p>
                <strong>mastrtogpx</strong> und <strong>mastrtoplot</strong> können auch direkt als Kommandozeilen-Tools genutzt werden:
                <ul>
                    <li><code>mastrtogpx</code>: MaStR CSV → GPX</li>
                    <li><code>mastrtoplot</code>: MaStR CSV → SVG</li>
                </ul>
                Weitere Informationen zu Installation und Nutzung finden sich im Repository.
            </p>
        </div>
    </main>
</body>
</html>
